-- MySQL Script generated by MySQL Workbench
-- Wed Aug 29 21:39:33 2018
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema projekat
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema projekat
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `projekat` DEFAULT CHARACTER SET utf8 ;
USE `projekat` ;

-- -----------------------------------------------------
-- Table `projekat`.`room_type`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `projekat`.`room_type` (
  `id` INT NOT NULL,
  `type` VARCHAR(45) NOT NULL,
  `price` DECIMAL NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `projekat`.`room`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `projekat`.`room` (
  `id` INT NOT NULL,
  `room_type_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_room_room_type1_idx` (`room_type_id` ASC),
  CONSTRAINT `fk_room_room_type1`
    FOREIGN KEY (`room_type_id`)
    REFERENCES `projekat`.`room_type` (`id`)
    ON DELETE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `projekat`.`role`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `projekat`.`role` (
  `id` INT NOT NULL,
  `role` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `projekat`.`user`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `projekat`.`user` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `first_name` VARCHAR(45) NOT NULL,
  `last_name` VARCHAR(45) NOT NULL,
  `date_of_birth` DATE NOT NULL,
  `gender` VARCHAR(45) NOT NULL,
  `email` VARCHAR(45) NOT NULL,
  `username` VARCHAR(45) NOT NULL,
  `password` VARCHAR(45) NOT NULL,
  `role_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_user_role1_idx` (`role_id` ASC),
  CONSTRAINT `fk_user_role1`
    FOREIGN KEY (`role_id`)
    REFERENCES `projekat`.`role` (`id`)
    ON DELETE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `projekat`.`reservation_status`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `projekat`.`reservation_status` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `status` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `projekat`.`reservation`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `projekat`.`reservation` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `arrival` DATE NOT NULL,
  `departure` DATE NOT NULL,
  `num_of_guests` INT NOT NULL,
  `reservation_status_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_reservation_reservation_status1_idx` (`reservation_status_id` ASC),
  CONSTRAINT `fk_reservation_reservation_status1`
    FOREIGN KEY (`reservation_status_id`)
    REFERENCES `projekat`.`reservation_status` (`id`)
    ON DELETE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `projekat`.`bill`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `projekat`.`bill` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `quantity` INT NOT NULL,
  `item_price` INT NOT NULL,
  `date` DATE NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `projekat`.`occupied_room`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `projekat`.`occupied_room` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `room_id` INT NOT NULL,
  `reservation_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_occupied_room_room1_idx` (`room_id` ASC),
  INDEX `fk_occupied_room_reservation1_idx` (`reservation_id` ASC),
  CONSTRAINT `fk_occupied_room_room1`
    FOREIGN KEY (`room_id`)
    REFERENCES `projekat`.`room` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_occupied_room_reservation1`
    FOREIGN KEY (`reservation_id`)
    REFERENCES `projekat`.`reservation` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `projekat`.`bill_reservation`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `projekat`.`bill_reservation` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `bill_id` INT NOT NULL,
  `reservation_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_bill_reservation_bill1_idx` (`bill_id` ASC),
  INDEX `fk_bill_reservation_reservation1_idx` (`reservation_id` ASC),
  CONSTRAINT `fk_bill_reservation_bill1`
    FOREIGN KEY (`bill_id`)
    REFERENCES `projekat`.`bill` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_bill_reservation_reservation1`
    FOREIGN KEY (`reservation_id`)
    REFERENCES `projekat`.`reservation` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `projekat`.`user_reservation`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `projekat`.`user_reservation` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `user_id` INT NOT NULL,
  `reservation_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_user_reservation_user1_idx` (`user_id` ASC),
  INDEX `fk_user_reservation_reservation1_idx` (`reservation_id` ASC),
  CONSTRAINT `fk_user_reservation_user1`
    FOREIGN KEY (`user_id`)
    REFERENCES `projekat`.`user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_user_reservation_reservation1`
    FOREIGN KEY (`reservation_id`)
    REFERENCES `projekat`.`reservation` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `projekat`.`room_type`
-- -----------------------------------------------------
START TRANSACTION;
USE `projekat`;
INSERT INTO `projekat`.`room_type` (`id`, `type`, `price`) VALUES (1, 'DBL', 50.00);
INSERT INTO `projekat`.`room_type` (`id`, `type`, `price`) VALUES (2, '2DBL', 75.00);
INSERT INTO `projekat`.`room_type` (`id`, `type`, `price`) VALUES (3, 'SUITE', 100.00);
INSERT INTO `projekat`.`room_type` (`id`, `type`, `price`) VALUES (4, 'EXECUTIVE SUITE', 150.00);

COMMIT;


-- -----------------------------------------------------
-- Data for table `projekat`.`room`
-- -----------------------------------------------------
START TRANSACTION;
USE `projekat`;
INSERT INTO `projekat`.`room` (`id`, `room_type_id`) VALUES (101, 1);
INSERT INTO `projekat`.`room` (`id`, `room_type_id`) VALUES (102, 1);
INSERT INTO `projekat`.`room` (`id`, `room_type_id`) VALUES (103, 1);
INSERT INTO `projekat`.`room` (`id`, `room_type_id`) VALUES (104, 1);
INSERT INTO `projekat`.`room` (`id`, `room_type_id`) VALUES (105, 2);
INSERT INTO `projekat`.`room` (`id`, `room_type_id`) VALUES (106, 2);
INSERT INTO `projekat`.`room` (`id`, `room_type_id`) VALUES (107, 2);
INSERT INTO `projekat`.`room` (`id`, `room_type_id`) VALUES (108, 2);
INSERT INTO `projekat`.`room` (`id`, `room_type_id`) VALUES (201, 3);
INSERT INTO `projekat`.`room` (`id`, `room_type_id`) VALUES (202, 3);
INSERT INTO `projekat`.`room` (`id`, `room_type_id`) VALUES (203, 4);

COMMIT;


-- -----------------------------------------------------
-- Data for table `projekat`.`role`
-- -----------------------------------------------------
START TRANSACTION;
USE `projekat`;
INSERT INTO `projekat`.`role` (`id`, `role`) VALUES (1, 'ADMIN');
INSERT INTO `projekat`.`role` (`id`, `role`) VALUES (2, 'MANAGER');
INSERT INTO `projekat`.`role` (`id`, `role`) VALUES (3, 'GUEST');

COMMIT;


-- -----------------------------------------------------
-- Data for table `projekat`.`reservation_status`
-- -----------------------------------------------------
START TRANSACTION;
USE `projekat`;
INSERT INTO `projekat`.`reservation_status` (`id`, `status`) VALUES (1, 'DONE');
INSERT INTO `projekat`.`reservation_status` (`id`, `status`) VALUES (2, 'PENDING');
INSERT INTO `projekat`.`reservation_status` (`id`, `status`) VALUES (3, 'CANCELLED');

COMMIT;

